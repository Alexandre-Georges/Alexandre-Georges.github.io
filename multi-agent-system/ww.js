!function(e){var t={};function o(r){if(t[r])return t[r].exports;var d=t[r]={i:r,l:!1,exports:{}};return e[r].call(d.exports,d,d.exports,o),d.l=!0,d.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var d in e)o.d(r,d,function(t){return e[t]}.bind(null,d));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);let r=!1,d=100;const a=e=>{e(),!0===r&&setTimeout(()=>a(e),d)};var n=()=>d,i=e=>{d=e},l=e=>{r=!1,a(e)},u=e=>{r=!0,a(e)},s=()=>{r=!1};const f={},g=({height:e,width:t,isWrapAround:o,aliveOdds:r})=>{f.height=e,f.width=t,f.isWrapAround=o,f.aliveOdds=r,f.board=[];for(let o=0;o<e;o++){f.board[o]=[];for(let e=0;e<t;e++)f.board[o][e]=!1}},c=(e,t,o,r,d,a)=>{let n=d,i=a;if(d<0||d>=t){if(!o)return!1;n=d<0?t-1:0}if(a<0||a>=e){if(!o)return!1;i=a<0?e-1:0}return r[i][n]},p=(e,t,o,r,d,a)=>{const n=((e,t,o,r,d,a)=>{let n=0;const i=[{dx:-1,dy:-1},{dx:0,dy:-1},{dx:1,dy:-1},{dx:-1,dy:0},{dx:1,dy:0},{dx:-1,dy:1},{dx:0,dy:1},{dx:1,dy:1}];for(const l of i)c(e,t,o,r,d+l.dx,a+l.dy)&&n++;return n})(e,t,o,r,d,a);return!0===r[a][d]?!(n<2||n>3):3===n},y=()=>{f.board=(({height:e,width:t,aliveOdds:o})=>{const r=[];for(let d=0;d<e;d++){r[d]=[];for(let e=0;e<t;e++)r[d][e]=Math.random()<o}return r})(f)};g({height:50,width:100,isWrapAround:!0,aliveOdds:.05,board:null}),y();let b={getCode:()=>"GAME_OF_LIFE",getName:()=>"Game Of Life",getConfig:()=>({height:f.height,width:f.width,isWrapAround:f.isWrapAround,aliveOdds:f.aliveOdds}),updateConfig:g,initBoard:y,clickOnCell:(e,t)=>((e,t,o)=>{e[o][t]=!e[o][t]})(f.board,e,t),goToNextTurn:()=>{f.board=(({height:e,width:t,isWrapAround:o,board:r})=>{const d=[];for(let a=0;a<e;a++){d[a]=[];for(let n=0;n<t;n++)d[a][n]=p(e,t,o,r,n,a)}return d})(f)},getColouredBoard:()=>(({height:e,width:t,board:o})=>{const r=[];for(let d=0;d<e;d++)for(let e=0;e<t;e++)!0===o[d][e]&&r.push({x:e,y:d,colour:"black"});return r})(f)};var h={getAll:()=>({gameCode:b.getCode(),gameName:b.getName(),config:b.getConfig(),board:b.getColouredBoard()}),updateConfig:e=>b.updateConfig(e),initBoard:()=>b.initBoard(),clickOnCell:(e,t)=>b.clickOnCell(e,t),goToNextTurn:()=>b.goToNextTurn(),getColouredBoard:()=>b.getColouredBoard()};const C=e=>{e.goToNextTurn(),postMessage({type:"BOARD_UPDATE",board:e.getColouredBoard()})};onmessage=e=>{if("GET_ALL"===e.data.type){const e=h.getAll();e.timeout=n(),postMessage({type:"SET_ALL",all:e})}else if("NEXT_TURN"===e.data.type)l(()=>C(h));else if("RUN"===e.data.type)u(()=>C(h));else if("PAUSE"===e.data.type)s();else if("UPDATE_CONFIG"===e.data.type){s(),h.updateConfig(e.data.config),h.initBoard();const t=h.getAll();t.timeout=n(),postMessage({type:"SET_ALL",all:t})}else"TIMEOUT_UPDATE"===e.data.type?i(e.data.timeout):"RESET"===e.data.type?(h.initBoard(),postMessage({type:"BOARD_UPDATE",board:h.getColouredBoard()})):"CELL_CLICK"===e.data.type&&(h.clickOnCell(e.data.x,e.data.y),postMessage({type:"BOARD_UPDATE",board:h.getColouredBoard()}))}}]);